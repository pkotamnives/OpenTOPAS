# These values are used in all of the nozzle examples.

#All coordination information comes from TsDefaultParameters.
#IEC 61217 compliance

#Fixed Reference system (If)     => World volume
#Gantry coordination system (Ig) => GantryCoordination
#Source coordination system (S)  => BeamPosition rotateX(180), Z position w.r.t GantryCoordination
#Beam source coordinate system rotate 180 and translate along z w.r.t g.
#-> Y is -Y. we have to flip phase space data.
#Isocenter coordination system (Io)

d:Ge/World/HLX = 6. m
d:Ge/World/HLY = 1.5 m
d:Ge/World/HLZ = 6. m

#S2I
#d:Ge/S2I = 3.0 m

#Backwall 
s:Ge/Backwall/Type     = "TsBox"
s:Ge/Backwall/Parent   = "World"
s:Ge/Backwall/Material = "G4_CONCRETE"
d:Ge/Backwall/HLX      =  6. m
d:Ge/Backwall/HLY      =  1.5 m
d:Ge/Backwall/HLZ      =  1. m
d:Ge/Backwall/TransX   =  0 m
d:Ge/Backwall/TransY   =  0 m
d:Ge/Backwall/TransZ   =  5.0 m
d:Ge/Backwall/RotX     =  0 deg
d:Ge/Backwall/RotY     =  0 deg
d:Ge/Backwall/RotZ     =  0 deg
s:Ge/Backwall/Color    =  "red"
b:Ge/Backwall/Include  = "TRUE" 

#Frontwall 
s:Ge/Frontwall/Type     = "TsBox"
s:Ge/Frontwall/Parent   = "World"
s:Ge/Frontwall/Material = "G4_CONCRETE"
d:Ge/Frontwall/HLX      =  6. m
d:Ge/Frontwall/HLY      =  1.5 m
d:Ge/Frontwall/HLZ      =  1. m
d:Ge/Frontwall/TransX   =  0 m
d:Ge/Frontwall/TransY   =  0 m
d:Ge/Frontwall/TransZ   =  -5.0 m
d:Ge/Frontwall/RotX     =  0 deg
d:Ge/Frontwall/RotY     =  0 deg
d:Ge/Frontwall/RotZ     =  0 deg
s:Ge/Frontwall/Color    =  "red"
b:Ge/Frontwall/Include  = "TRUE" 

#Cylindrical bottom ring 
s:Ge/BottomRingQ1/Parent = "World"
s:Ge/BottomRingQ1/Type = "TsCylinder"
d:Ge/BottomRingQ1/Rmax = 3.5 m
d:Ge/BottomRingQ1/Rmin = 3.3 m
d:Ge/BottomRingQ1/HL = 0.1 m 
s:Ge/BottomRingQ1/Material = "G4_Al"
d:Ge/BottomRingQ1/RotX = 90. deg 
d:Ge/BottomRingQ1/SPhi = 45 deg
d:Ge/BottomRingQ1/DPhi = 70 deg 
d:Ge/BottomRingQ1/TransX = 0 m
d:Ge/BottomRingQ1/TransY = -1.0 m
d:Ge/BottomRingQ1/TransZ = 0 m
b:Ge/BottomRingQ1/Include  = "TRUE" 

s:Ge/BottomRingQ2/Parent = "World"
s:Ge/BottomRingQ2/Type = "TsCylinder"
d:Ge/BottomRingQ2/Rmax = 3.5 m
d:Ge/BottomRingQ2/Rmin = 3.3 m
d:Ge/BottomRingQ2/HL = 0.1 m 
s:Ge/BottomRingQ2/Material = "G4_Al"
d:Ge/BottomRingQ2/RotX = 90. deg 
d:Ge/BottomRingQ2/SPhi = 135 deg
d:Ge/BottomRingQ2/DPhi = 70 deg 
d:Ge/BottomRingQ2/TransX = 0 m
d:Ge/BottomRingQ2/TransY = -1.0 m
d:Ge/BottomRingQ2/TransZ = 0 m
b:Ge/BottomRingQ2/Include  = "TRUE" 

s:Ge/BottomRingQ3/Parent = "World"
s:Ge/BottomRingQ3/Type = "TsCylinder"
d:Ge/BottomRingQ3/Rmax = 3.5 m
d:Ge/BottomRingQ3/Rmin = 3.3 m
d:Ge/BottomRingQ3/HL = 0.1 m 
s:Ge/BottomRingQ3/Material = "G4_Al"
d:Ge/BottomRingQ3/RotX = 90. deg 
d:Ge/BottomRingQ3/SPhi = 225 deg
d:Ge/BottomRingQ3/DPhi = 70 deg 
d:Ge/BottomRingQ3/TransX = 0 m
d:Ge/BottomRingQ3/TransY = -1.0 m
d:Ge/BottomRingQ3/TransZ = 0 m
b:Ge/BottomRingQ3/Include  = "TRUE" 

s:Ge/BottomRingQ4/Parent = "World"
s:Ge/BottomRingQ4/Type = "TsCylinder"
d:Ge/BottomRingQ4/Rmax = 3.5 m
d:Ge/BottomRingQ4/Rmin = 3.3 m
d:Ge/BottomRingQ4/HL = 0.1 m 
s:Ge/BottomRingQ4/Material = "G4_Al"
d:Ge/BottomRingQ4/RotX = 90. deg 
d:Ge/BottomRingQ4/SPhi = 315 deg
d:Ge/BottomRingQ4/DPhi = 70 deg 
d:Ge/BottomRingQ4/TransX = 0 m
d:Ge/BottomRingQ4/TransY = -1.0 m
d:Ge/BottomRingQ4/TransZ = 0 m
b:Ge/BottomRingQ4/Include  = "TRUE" 

#Tilted extraction
s:Ge/Extraction/Parent = "World"
s:Ge/Extraction/Type = "TsCylinder"
d:Ge/Extraction/Rmax = 0.15 m
d:Ge/Extraction/HL = 0.5 m 
s:Ge/Extraction/Material = "G4_Al"
d:Ge/Extraction/RotX = 30.00 deg 
d:Ge/Extraction/RotY = 173.09 deg #172.02 deg 
d:Ge/Extraction/TransX = 3.6 m #3.548 m #3.565 m #1.956 m
d:Ge/Extraction/TransY = -0.5 m
d:Ge/Extraction/TransZ = -1.5 m #-0.430 m #-0.500 m #-1.644 m
b:Ge/Extraction/Include  = "TRUE" 

#Tilted extraction filled with air
s:Ge/AirExtraction/Parent = "Extraction"
s:Ge/AirExtraction/Type = "TsCylinder"
d:Ge/AirExtraction/Rmax = 0.1 m
d:Ge/AirExtraction/HL = 0.5 m 
d:Ge/AirExtraction/TransX = 0.0 m 
d:Ge/AirExtraction/TransY = 0.0 m
d:Ge/AirExtraction/TransZ = 0.0 m 
b:Ge/AirExtraction/IsParallel = "True"
b:Ge/AirExtraction/Include  = "TRUE" 

#Horizontal extraction
s:Ge/Extraction2/Parent = "Gantry"
s:Ge/Extraction2/Type = "TsCylinder"
d:Ge/Extraction2/Rmax = 0.15 m
d:Ge/Extraction2/HL = 0.5 m 
s:Ge/Extraction2/Material = "G4_Al"
d:Ge/Extraction2/TransX = 0.0 m 
d:Ge/Extraction2/TransY = 0.0 m
d:Ge/Extraction2/TransZ = 2.8 m 
b:Ge/Extraction2/Include  = "TRUE" 

#Horizontal extraction filled with air
s:Ge/AirExtraction2/Parent = "Extraction2"
s:Ge/AirExtraction2/Type = "TsCylinder"
d:Ge/AirExtraction2/Rmax = 0.1 m
d:Ge/AirExtraction2/HL = 0.5 m 
d:Ge/AirExtraction2/TransX = 0.0 m 
d:Ge/AirExtraction2/TransY = 0.0 m
d:Ge/AirExtraction2/TransZ = 0.0 m 
b:Ge/AirExtraction2/IsParallel = "True"
b:Ge/AirExtraction2/Include  = "TRUE" 


#Cylindrical top ring 
s:Ge/TopRing/Parent = "World"
s:Ge/TopRing/Type = "TsCylinder"
d:Ge/TopRing/Rmax = 3.7 m
d:Ge/TopRing/Rmin = 3.5 m
d:Ge/TopRing/HL = 0.1 m 
s:Ge/TopRing/Material = "G4_Al"
d:Ge/TopRing/RotX = 90. deg 
d:Ge/TopRing/RotZ = 180. deg 
d:Ge/TopRing/SPhi = 90 deg
d:Ge/TopRing/DPhi = 90 deg 
d:Ge/TopRing/TransX = 0 m
d:Ge/TopRing/TransY = 0 m
d:Ge/TopRing/TransZ = 0 m
b:Ge/TopRing/Include  = "TRUE" 

#Gantry coordination system (Ig)
s:Ge/Gantry/Parent = "World"
s:Ge/Gantry/Type   = "Group"
d:Ge/Gantry/TransX = 0. m
d:Ge/Gantry/TransY = 0. m
d:Ge/Gantry/TransZ = 0. m
d:Ge/Gantry/RotX   = 0. deg
d:Ge/Gantry/RotY   = 0. deg
d:Ge/Gantry/RotZ   = 0. deg

# Default Beam position
s:Ge/BeamPosition2/Parent = "Extraction2"
s:Ge/BeamPosition2/Type   = "Group"
d:Ge/BeamPosition2/TransX = 0. m
d:Ge/BeamPosition2/TransY = 0. m
d:Ge/BeamPosition2/TransZ = -0.5 m
d:Ge/BeamPosition2/RotX   = 180. deg
d:Ge/BeamPosition2/RotY   = 0. deg
d:Ge/BeamPosition2/RotZ   = 0. deg
b:Ge/BeamPosition2/Include  = "TRUE" 

# Tilted Beam position
s:Ge/BeamPosition/Parent = "Extraction"
s:Ge/BeamPosition/Type   = "Group"
d:Ge/BeamPosition/TransX = 0. m
d:Ge/BeamPosition/TransY = 0. m
d:Ge/BeamPosition/TransZ = -0.5 m
d:Ge/BeamPosition/RotX   = 180. deg 
d:Ge/BeamPosition/RotY   = 0. deg 
d:Ge/BeamPosition/RotZ   = 0. deg
b:Ge/BeamPosition/Include  = "TRUE" 

# Q1 Beam position
s:Ge/BeamPositionQ1/Parent = "Gantry"
s:Ge/BeamPositionQ1/Type   = "Group"
d:Ge/BeamPositionQ1/TransX = 2.404 m
d:Ge/BeamPositionQ1/TransY = -1.0 m
d:Ge/BeamPositionQ1/TransZ = 2.404 m
d:Ge/BeamPositionQ1/RotX   = 0. deg 
d:Ge/BeamPositionQ1/RotY   = 45. deg 
d:Ge/BeamPositionQ1/RotZ   = 0. deg
b:Ge/BeamPositionQ1/Include  = "TRUE" 

# Q2 Beam position
s:Ge/BeamPositionQ2/Parent = "Gantry"
s:Ge/BeamPositionQ2/Type   = "Group"
d:Ge/BeamPositionQ2/TransX = -2.404 m
d:Ge/BeamPositionQ2/TransY = -1.0 m
d:Ge/BeamPositionQ2/TransZ = 2.404 m
d:Ge/BeamPositionQ2/RotX   = 0. deg 
d:Ge/BeamPositionQ2/RotY   = 135. deg 
d:Ge/BeamPositionQ2/RotZ   = 0. deg
b:Ge/BeamPositionQ2/Include  = "TRUE" 

# Q3 Beam position
s:Ge/BeamPositionQ3/Parent = "Gantry"
s:Ge/BeamPositionQ3/Type   = "Group"
d:Ge/BeamPositionQ3/TransX = -2.404 m
d:Ge/BeamPositionQ3/TransY = -1.0 m
d:Ge/BeamPositionQ3/TransZ = -2.404 m
d:Ge/BeamPositionQ3/RotX   = 0. deg 
d:Ge/BeamPositionQ3/RotY   = 225. deg 
d:Ge/BeamPositionQ3/RotZ   = 0. deg
b:Ge/BeamPositionQ3/Include  = "TRUE" 

# Q4 Beam position
s:Ge/BeamPositionQ4/Parent = "Gantry"
s:Ge/BeamPositionQ4/Type   = "Group"
d:Ge/BeamPositionQ4/TransX = 2.404 m
d:Ge/BeamPositionQ4/TransY = -1.0 m
d:Ge/BeamPositionQ4/TransZ = -2.404 m
d:Ge/BeamPositionQ4/RotX   = 0. deg 
d:Ge/BeamPositionQ4/RotY   = 315. deg 
d:Ge/BeamPositionQ4/RotZ   = 0. deg
b:Ge/BeamPositionQ4/Include  = "TRUE" 

s:So/Beam2/Type                     = "Beam"
s:So/Beam2/Component                = "BeamPosition2"
s:So/Beam2/BeamParticle             = "proton"
d:So/Beam2/BeamEnergy               = 200 MeV #FIXME 
u:So/Beam2/BeamEnergySpread         = 1.5 #FIXME 
s:So/Beam2/BeamPositionDistribution = "Gaussian"
s:So/Beam2/BeamPositionCutoffShape  = "Ellipse"
d:So/Beam2/BeamPositionCutoffX      = 5. cm #FIXME
d:So/Beam2/BeamPositionCutoffY      = 5. cm #FIXME
d:So/Beam2/BeamPositionSpreadX      = 1.105 cm #FIXME
d:So/Beam2/BeamPositionSpreadY      = 1.105 cm #FIXME
s:So/Beam2/BeamAngularDistribution  = "Gaussian"
d:So/Beam2/BeamAngularCutoffX       = 90. deg
d:So/Beam2/BeamAngularCutoffY       = 90. deg
d:So/Beam2/BeamAngularSpreadX       = 0.0030 rad #FIXME
d:So/Beam2/BeamAngularSpreadY       = 0.0030 rad #FIXME
i:So/Beam2/NumberOfHistoriesInRun   = 7 #1000000 #FIXME essentially the number of primary particles 
b:Ge/Beam2/Include  = "TRUE" 


s:So/Beam/Type                     = "Beam"
s:So/Beam/Component                = "BeamPosition"
s:So/Beam/BeamParticle             = "proton"
d:So/Beam/BeamEnergy               = 200 MeV #FIXME 
u:So/Beam/BeamEnergySpread         = 1.5 #FIXME 
s:So/Beam/BeamPositionDistribution = "Gaussian"
s:So/Beam/BeamPositionCutoffShape  = "Ellipse"
d:So/Beam/BeamPositionCutoffX      = 5. cm #FIXME
d:So/Beam/BeamPositionCutoffY      = 5. cm #FIXME
d:So/Beam/BeamPositionSpreadX      = 1.105 cm #FIXME
d:So/Beam/BeamPositionSpreadY      = 1.105 cm #FIXME
s:So/Beam/BeamAngularDistribution  = "Gaussian"
d:So/Beam/BeamAngularCutoffX       = 90. deg
d:So/Beam/BeamAngularCutoffY       = 90. deg
d:So/Beam/BeamAngularSpreadX       = 0.0030 rad #FIXME
d:So/Beam/BeamAngularSpreadY       = 0.0030 rad #FIXME
i:So/Beam/NumberOfHistoriesInRun   = 10 #1000000 #FIXME essentially the number of primary particles 
b:Ge/Beam/Include  = "TRUE" 

s:So/BeamQ1/Type                     = "Beam"
s:So/BeamQ1/Component                = "BeamPositionQ1"
s:So/BeamQ1/BeamParticle             = "proton"
d:So/BeamQ1/BeamEnergy               = 200 MeV #FIXME 
u:So/BeamQ1/BeamEnergySpread         = 1.5 #FIXME 
s:So/BeamQ1/BeamPositionDistribution = "Gaussian"
s:So/BeamQ1/BeamPositionCutoffShape  = "Ellipse"
d:So/BeamQ1/BeamPositionCutoffX      = 5. cm #FIXME
d:So/BeamQ1/BeamPositionCutoffY      = 5. cm #FIXME
d:So/BeamQ1/BeamPositionSpreadX      = 1.105 cm #FIXME
d:So/BeamQ1/BeamPositionSpreadY      = 1.105 cm #FIXME
s:So/BeamQ1/BeamAngularDistribution  = "Gaussian"
d:So/BeamQ1/BeamAngularCutoffX       = 90. deg
d:So/BeamQ1/BeamAngularCutoffY       = 90. deg
d:So/BeamQ1/BeamAngularSpreadX       = 0.0030 rad #FIXME
d:So/BeamQ1/BeamAngularSpreadY       = 0.0030 rad #FIXME
i:So/BeamQ1/NumberOfHistoriesInRun   = 10 #1000000 #FIXME essentially the number of primary particles 
b:Ge/BeamQ1/Include  = "TRUE" 

s:So/BeamQ2/Type                     = "Beam"
s:So/BeamQ2/Component                = "BeamPositionQ2"
s:So/BeamQ2/BeamParticle             = "proton"
d:So/BeamQ2/BeamEnergy               = 200 MeV #FIXME 
u:So/BeamQ2/BeamEnergySpread         = 1.5 #FIXME 
s:So/BeamQ2/BeamPositionDistribution = "Gaussian"
s:So/BeamQ2/BeamPositionCutoffShape  = "Ellipse"
d:So/BeamQ2/BeamPositionCutoffX      = 5. cm #FIXME
d:So/BeamQ2/BeamPositionCutoffY      = 5. cm #FIXME
d:So/BeamQ2/BeamPositionSpreadX      = 1.105 cm #FIXME
d:So/BeamQ2/BeamPositionSpreadY      = 1.105 cm #FIXME
s:So/BeamQ2/BeamAngularDistribution  = "Gaussian"
d:So/BeamQ2/BeamAngularCutoffX       = 90. deg
d:So/BeamQ2/BeamAngularCutoffY       = 90. deg
d:So/BeamQ2/BeamAngularSpreadX       = 0.0030 rad #FIXME
d:So/BeamQ2/BeamAngularSpreadY       = 0.0030 rad #FIXME
i:So/BeamQ2/NumberOfHistoriesInRun   = 10 #1000000 #FIXME essentially the number of primary particles 
b:Ge/BeamQ2/Include  = "TRUE" 

s:So/BeamQ3/Type                     = "Beam"
s:So/BeamQ3/Component                = "BeamPositionQ3"
s:So/BeamQ3/BeamParticle             = "proton"
d:So/BeamQ3/BeamEnergy               = 200 MeV #FIXME 
u:So/BeamQ3/BeamEnergySpread         = 1.5 #FIXME 
s:So/BeamQ3/BeamPositionDistribution = "Gaussian"
s:So/BeamQ3/BeamPositionCutoffShape  = "Ellipse"
d:So/BeamQ3/BeamPositionCutoffX      = 5. cm #FIXME
d:So/BeamQ3/BeamPositionCutoffY      = 5. cm #FIXME
d:So/BeamQ3/BeamPositionSpreadX      = 1.105 cm #FIXME
d:So/BeamQ3/BeamPositionSpreadY      = 1.105 cm #FIXME
s:So/BeamQ3/BeamAngularDistribution  = "Gaussian"
d:So/BeamQ3/BeamAngularCutoffX       = 90. deg
d:So/BeamQ3/BeamAngularCutoffY       = 90. deg
d:So/BeamQ3/BeamAngularSpreadX       = 0.0030 rad #FIXME
d:So/BeamQ3/BeamAngularSpreadY       = 0.0030 rad #FIXME
i:So/BeamQ3/NumberOfHistoriesInRun   = 10 #1000000 #FIXME essentially the number of primary particles 
b:Ge/BeamQ3/Include  = "TRUE" 

s:So/BeamQ4/Type                     = "Beam"
s:So/BeamQ4/Component                = "BeamPositionQ4"
s:So/BeamQ4/BeamParticle             = "proton"
d:So/BeamQ4/BeamEnergy               = 200 MeV #FIXME 
u:So/BeamQ4/BeamEnergySpread         = 1.5 #FIXME 
s:So/BeamQ4/BeamPositionDistribution = "Gaussian"
s:So/BeamQ4/BeamPositionCutoffShape  = "Ellipse"
d:So/BeamQ4/BeamPositionCutoffX      = 5. cm #FIXME
d:So/BeamQ4/BeamPositionCutoffY      = 5. cm #FIXME
d:So/BeamQ4/BeamPositionSpreadX      = 1.105 cm #FIXME
d:So/BeamQ4/BeamPositionSpreadY      = 1.105 cm #FIXME
s:So/BeamQ4/BeamAngularDistribution  = "Gaussian"
d:So/BeamQ4/BeamAngularCutoffX       = 90. deg
d:So/BeamQ4/BeamAngularCutoffY       = 90. deg
d:So/BeamQ4/BeamAngularSpreadX       = 0.0030 rad #FIXME
d:So/BeamQ4/BeamAngularSpreadY       = 0.0030 rad #FIXME
i:So/BeamQ4/NumberOfHistoriesInRun   = 10 #1000000 #FIXME essentially the number of primary particles 
b:Ge/BeamQ4/Include  = "TRUE" 

b:Ts/ShowCPUTime                  = "true"
i:Ts/ShowHistoryCountAtInterval   = 0
b:Ts/ShowHistoryCountOnSingleLine = "False"

########################################
#Material
#NitrogenGas for Chamber
#HeliumGas   for Pipe
########################################
sv:Ma/NiGas/Components = 1 "Nitrogen"
uv:Ma/NiGas/Fractions  = 1 1.0
d:Ma/NiGas/Density     = 0.001251 g/cm3
#0.001251 g/cm3 (gas, 0 C, 101.325 kPa)

sv:Ma/HeGas/Components = 1 "Helium"
uv:Ma/HeGas/Fractions  = 1 1.0
d:Ma/HeGas/Density     = 0.000166322 g/cm3

sv:Ma/Gold/Components          = 1 "Gold"
uv:Ma/Gold/Fractions           = 1 1.0
d:Ma/Gold/Density              = 19.3 g/cm3
d:Ma/Gold/MeanExcitationEnergy = 790.0 eV
s:Ma/Gold/DefaultColor         = "orange"

sv:Ma/CompensatorLucite/Components          = 3 "Hydrogen" "Carbon" "Oxygen"
uv:Ma/CompensatorLucite/Fractions           = 3 0.080538 0.599848 0.319614
d:Ma/CompensatorLucite/Density              = 1.181 g/cm3
d:Ma/CompensatorLucite/MeanExcitationEnergy = 74.0 eV
s:Ma/CompensatorLucite/DefaultColor         = "grey"

########################################
# OGL Settings
########################################
s:Gr/MyOGL/Type        = "OpenGL"
i:Gr/MyOGL/WindowSizeX = 600
i:Gr/MyOGL/WindowSizeY = 600
i:Gr/MyOGL/WindowPosX  = 0
i:Gr/MyOGL/WindowPosY  = 0
s:Gr/MyOGL/ColorBy     = "ParticleType"
sv:Gr/MyOGL/ColorByParticleTypeNames      = 4 "e-" "gamma" "proton" "neutron"
sv:Gr/MyOGL/ColorByParticleTypeColors     = 4 "yellow" "pink" "aqua" "grass"

s:Gr/ViewA/Type              = "OpenGL"

Ts/UseQt = "True"
b:Gr/Enable = "True"

########################################
# Physics
########################################
sv:Ph/Default/Modules = 7 "g4em-standard_opt3" "g4h-phy_QGSP_BIC_HP" "g4decay" "g4ion-binarycascade" "g4h-elastic_HP" "g4stopping" "g4radioactivedecay" #FIXME
#d:Ph/Default/CutForAllParticles = 0.05 cm #FIXME
i:Tf/Verbosity = 1

########################################
# Sequence control
########################################
b:Ts/PauseBeforeSequence = "F"
